#!/bin/bash
URL=$1
download () {
	case $OPTION in
		0|3)
			FORMAT="b/bv+ba";;
		1|4)
			FORMAT="ba/b -x --audio-format mp3";;
		2|5)
			clear
			yt-dlp -qF $URL
			read -p "Video+Audio: " FORMAT;;
		*)
			echo Download termux-api from F-DROID for a better interface, or type a number and press enter
			read -p "1) Download Video 2) Download Music 3) Download Custom 4) Stream Video 5) Stream Music 6) Stream Custom: " OPTION
			OPTION=`expr $OPTION - 1`
			download;;
	esac
	case $OPTION in
		3|4|5)
		URL="-g $URL | termux-share -a send";;
	esac
	yt-dlp -f "$FORMAT" "$URL"
	exit
}
termux-api-start
OPTION="$(termux-dialog sheet -v '1) Download Video','2) Download Music','3) Download Custom','4) Stream Video','5) Stream Music','6) Stream Custom' | jq '.index' -r)"
download
